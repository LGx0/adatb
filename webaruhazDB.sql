--------------------------------------------------------
--  File created - kedd-március-15-2016   
--------------------------------------------------------
--DROP TABLE "H047123"."IRANYITOSZAM" cascade constraints;
--DROP TABLE "H047123"."SZALLITASOK" cascade constraints;
--DROP TABLE "H047123"."SZAMLAK" cascade constraints;
--DROP TABLE "H047123"."TERMEKEK" cascade constraints;
--DROP TABLE "H047123"."VASARLASOK" cascade constraints;
--DROP TABLE "H047123"."VASARLOK" cascade constraints;
--DROP TABLE "H047123"."VASAROL" cascade constraints;
--DROP SEQUENCE "H047123"."SZALLITAS_ID_SEQ";
--DROP SEQUENCE "H047123"."SZAMLA_SORSZAM_SEQ";
--DROP SEQUENCE "H047123"."TERMEK_KOD_PC_SEQ";
--DROP SEQUENCE "H047123"."TERMEK_KOD_PS2_SEQ";
--DROP SEQUENCE "H047123"."TERMEK_KOD_PS4_SEQ";
--DROP SEQUENCE "H047123"."TERMEK_KOD_UJ_KATEGORIA";
--DROP SEQUENCE "H047123"."TERMEK_KOD_XBOX_SEQ";
--DROP SEQUENCE "H047123"."VASARLAS_ID_SEQ";
--DROP VIEW "H047123"."SZALLITASOKVIEW";
--DROP VIEW "H047123"."SZAMLAKVIEW";
--------------------------------------------------------
--  DDL for Sequence SZALLITAS_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."SZALLITAS_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 66 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SZAMLA_SORSZAM_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."SZAMLA_SORSZAM_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 66 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TERMEK_KOD_PC_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."TERMEK_KOD_PC_SEQ"  MINVALUE 1 MAXVALUE 29999 INCREMENT BY 1 START WITH 10040 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TERMEK_KOD_PS2_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."TERMEK_KOD_PS2_SEQ"  MINVALUE 1 MAXVALUE 49999 INCREMENT BY 1 START WITH 30020 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TERMEK_KOD_PS4_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."TERMEK_KOD_PS4_SEQ"  MINVALUE 1 MAXVALUE 89999 INCREMENT BY 1 START WITH 70020 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TERMEK_KOD_UJ_KATEGORIA
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."TERMEK_KOD_UJ_KATEGORIA"  MINVALUE 1 MAXVALUE 150000 INCREMENT BY 1 START WITH 100060 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TERMEK_KOD_XBOX_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."TERMEK_KOD_XBOX_SEQ"  MINVALUE 1 MAXVALUE 69999 INCREMENT BY 1 START WITH 50020 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence VASARLAS_ID_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "H047123"."VASARLAS_ID_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 91 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table IRANYITOSZAM
--------------------------------------------------------

  CREATE TABLE "H047123"."IRANYITOSZAM" 
   (	"IRANYITOSZAM" NUMBER(4,0) DEFAULT 1000, 
	"VAROS" VARCHAR2(64 BYTE) DEFAULT '', 
	"MEGYE" VARCHAR2(77 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table SZALLITASOK
--------------------------------------------------------

  CREATE TABLE "H047123"."SZALLITASOK" 
   (	"ID" NUMBER(10,0), 
	"ESEDEKESSEG" DATE, 
	"ELKULDVE" NUMBER(1,0) DEFAULT 0, 
	"VASARLAS_ID" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table SZAMLAK
--------------------------------------------------------

  CREATE TABLE "H047123"."SZAMLAK" 
   (	"OSSZEG" NUMBER(10,0), 
	"AFA" NUMBER(10,0), 
	"SORSZAM" NUMBER(10,0), 
	"KELTE" DATE DEFAULT SYSDATE, 
	"VASARLAS_ID" NUMBER(10,0), 
	"VASARLO_EMAIL" VARCHAR2(40 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table TERMEKEK
--------------------------------------------------------

  CREATE TABLE "H047123"."TERMEKEK" 
   (	"KOD" NUMBER(10,0), 
	"NEV" VARCHAR2(40 BYTE), 
	"KATEGORIA" VARCHAR2(40 BYTE), 
	"BESZ_AR" NUMBER(10,0), 
	"ELAD_AR" NUMBER(10,0), 
	"ELADOTT_MENNYISEG" NUMBER(10,0), 
	"FELVETEL_DATUMA" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table VASARLASOK
--------------------------------------------------------

  CREATE TABLE "H047123"."VASARLASOK" 
   (	"ID" NUMBER(10,0), 
	"VASARLO_EMAIL" VARCHAR2(40 BYTE), 
	"FELVETEL" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table VASARLOK
--------------------------------------------------------

  CREATE TABLE "H047123"."VASARLOK" 
   (	"EMAIL" VARCHAR2(40 BYTE), 
	"JELSZO" VARCHAR2(20 BYTE), 
	"NEV" VARCHAR2(30 BYTE), 
	"REG_IDOPONT" DATE, 
	"BANKSZAMLASZAM" VARCHAR2(26 BYTE), 
	"EGYENLEG" NUMBER(10,0) DEFAULT 0, 
	"IRANYITOSZAM" NUMBER(4,0), 
	"UTCA" VARCHAR2(40 BYTE), 
	"HAZSZAM" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table VASAROL
--------------------------------------------------------

  CREATE TABLE "H047123"."VASAROL" 
   (	"VASARLAS_ID" NUMBER(10,0), 
	"TERMEK_KOD" NUMBER(10,0), 
	"AR" NUMBER(10,0), 
	"MENNYISEG" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for View SZALLITASOKVIEW
--------------------------------------------------------

  CREATE OR REPLACE FORCE VIEW "H047123"."SZALLITASOKVIEW" ("ID", "ESEDEKESSEG", "ELKULDVE", "VASARLAS_ID", "NEV", "IRANYITOSZAM", "VAROS", "UTCA", "HAZSZAM") AS 
  select szallitasok.id, SZALLITASOK.ESEDEKESSEG, SZALLITASOK.ELKULDVE, SZALLITASOK.VASARLAS_ID,
vasarlok.nev, vasarlok.IRANYITOSZAM, iranyitoszam.varos, vasarlok.UTCA, vasarlok.HAZSZAM  
from SZALLITASOK
inner join vasarlasok
on vasarlasok.ID = SZALLITASOK.VASARLAS_ID
inner join  vasarlok
on vasarlasok.vasarlo_email =vasarlok.email
inner join iranyitoszam
on VASARLOK.IRANYITOSZAM=IRANYITOSZAM.IRANYITOSZAM
order by SZALLITASOK.ESEDEKESSEG DESC, iranyitoszam.VAROS;
--------------------------------------------------------
--  DDL for View SZAMLAKVIEW
--------------------------------------------------------

  CREATE OR REPLACE FORCE VIEW "H047123"."SZAMLAKVIEW" ("OSSZEG", "SORSZAM", "KELTE", "VASARLAS_ID", "AFA", "NEV", "IRANYITOSZAM", "VAROS", "UTCA", "HAZSZAM") AS 
  select SZAMLAK.OSSZEG, SZAMLAK.SORSZAM, SZAMLAK.KELTE, SZAMLAK.VASARLAS_ID, SZAMLAK.AFA,
vasarlok.nev, vasarlok.IRANYITOSZAM, iranyitoszam.varos, vasarlok.UTCA, vasarlok.HAZSZAM  
from SZAMLAK
inner join  vasarlok
on SZAMLAK.vasarlo_email =vasarlok.email
inner join iranyitoszam
on VASARLOK.IRANYITOSZAM=IRANYITOSZAM.IRANYITOSZAM
order by SZAMLAK.SORSZAM DESC;
REM INSERTING into H047123.IRANYITOSZAM
SET DEFINE OFF;
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2000','Szentendre','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2011','Budakalász','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2013','Pomáz','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('3250','Pétervására','Heves');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6500','Baja','Bács-Kiskun');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('8638','Balatonlelle','Somogy');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('5600','Békéscsaba','Békés');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('9343','Beled','Gyõr-Moson-Sopron');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2060','Bicske','Fejér');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2700','Cegléd','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('8083','Csákvár','Fejér');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6640','Csongrád','Csongrád');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('3300','Eger','Heves');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2500','Esztergom','Komárom-Esztergom');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('8640','Fonyód','Somogy');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('5700','Gyula','Békés');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('3000','Hatvan','Heves');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2117','Isaszeg','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6800','Hódmezõvásárhely','Csongrád');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('3384','Kisköre','Heves');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6200','Kiskõrös','Bács-Kiskun');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6100','Kiskunfélegyháza','Bács-Kiskun');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2143','Kistarcsa','Pest');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('5516','Körösladány','Békés');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('2545','Lábatlan','Komárom-Esztergom');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('8693','Lengyeltóti','Somogy');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('9155','Lébény','Gyõr-Moson-Sopron');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6900','Makó','Csongrád');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('5650','Mezõberény','Békés');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('6700','Szeged','Csongrád');
Insert into H047123.IRANYITOSZAM (IRANYITOSZAM,VAROS,MEGYE) values ('5000','Szolnok','Jász-Nagykun-Szolnok');
REM INSERTING into H047123.SZALLITASOK
SET DEFINE OFF;
Insert into H047123.SZALLITASOK (ID,ESEDEKESSEG,ELKULDVE,VASARLAS_ID) values ('6',to_date('16-MÁRC. -08','RR-MON-DD'),'1','31');
Insert into H047123.SZALLITASOK (ID,ESEDEKESSEG,ELKULDVE,VASARLAS_ID) values ('30',to_date('16-MÁRC. -11','RR-MON-DD'),'1','55');
Insert into H047123.SZALLITASOK (ID,ESEDEKESSEG,ELKULDVE,VASARLAS_ID) values ('46',to_date('16-MÁRC. -20','RR-MON-DD'),'0','71');
REM INSERTING into H047123.SZAMLAK
SET DEFINE OFF;
Insert into H047123.SZAMLAK (OSSZEG,AFA,SORSZAM,KELTE,VASARLAS_ID,VASARLO_EMAIL) values ('9000','1913','26',to_date('16-MÁRC. -01','RR-MON-DD'),'31','shedy1414@gmail.com');
Insert into H047123.SZAMLAK (OSSZEG,AFA,SORSZAM,KELTE,VASARLAS_ID,VASARLO_EMAIL) values ('5000','1063','46',to_date('16-MÁRC. -06','RR-MON-DD'),'55','teszt@teszt.hu');
REM INSERTING into H047123.TERMEKEK
SET DEFINE OFF;
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100000','Fifa 2017','PC játék','5500','9000','20',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100001','CALL OF DUTY','PC játék','9000','11000','20',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100002','Fifa 2017','Xbox játék','5500','9000','12',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100003','CALL OF DUTY','Xbox játék','4500','7500','12',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100004','Fifa 2017','PS 2 játék','2500','5000','18',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100005','CALL OF DUTY','PS 2 játék','2500','4500','40',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100006','Fifa 2017','PS 4 játék','15500','19000','21',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100007','CALL OF DUTY','PS 4 játék','15500','17000','31',to_date('16-FEBR. -24','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100020','Dying Light','PC játék','14000','20000','0',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.TERMEKEK (KOD,NEV,KATEGORIA,BESZ_AR,ELAD_AR,ELADOTT_MENNYISEG,FELVETEL_DATUMA) values ('100021','Far Cry Primal','PC játék','15000','21000','1',to_date('16-MÁRC. -06','RR-MON-DD'));
REM INSERTING into H047123.VASARLASOK
SET DEFINE OFF;
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('31','shedy1414@gmail.com',to_date('16-MÁRC. -01','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('32','shedy1414@gmail.com',to_date('16-MÁRC. -01','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('51','shedy1414@gmail.com',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('52','teszt@teszt.hu',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('53','teszt@teszt.hu',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('54','teszt@teszt.hu',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('55','teszt@teszt.hu',to_date('16-MÁRC. -06','RR-MON-DD'));
Insert into H047123.VASARLASOK (ID,VASARLO_EMAIL,FELVETEL) values ('71','shedy1414@gmail.com',to_date('16-MÁRC. -15','RR-MON-DD'));
REM INSERTING into H047123.VASARLOK
SET DEFINE OFF;
Insert into H047123.VASARLOK (EMAIL,JELSZO,NEV,REG_IDOPONT,BANKSZAMLASZAM,EGYENLEG,IRANYITOSZAM,UTCA,HAZSZAM) values ('teszt@teszt.hu','teszt','Tesz',to_date('16-MÁRC. -06','RR-MON-DD'),'11111111-11111111-11111111','4000','6700','Teszt','1');
Insert into H047123.VASARLOK (EMAIL,JELSZO,NEV,REG_IDOPONT,BANKSZAMLASZAM,EGYENLEG,IRANYITOSZAM,UTCA,HAZSZAM) values ('shedy1414@gmail.com','user','Dési Bálint',to_date('16-MÁRC. -01','RR-MON-DD'),'11111111-11111111-00000000','175000','6640','Kis utca','1.');
Insert into H047123.VASARLOK (EMAIL,JELSZO,NEV,REG_IDOPONT,BANKSZAMLASZAM,EGYENLEG,IRANYITOSZAM,UTCA,HAZSZAM) values ('lokosgabor89@gmail.com','sajt','Lõkös Gábor',to_date('16-MÁRC. -15','RR-MON-DD'),'11773456-00676221-00000000','0','5000','Kis János utca','165');
REM INSERTING into H047123.VASAROL
SET DEFINE OFF;
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('31','100000','9000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('32','100004','5000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('51','100021','21000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('52','100006','19000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('53','100007','17000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('54','100004','5000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('55','100004','5000','1');
Insert into H047123.VASAROL (VASARLAS_ID,TERMEK_KOD,AR,MENNYISEG) values ('71','100002','9000','1');
--------------------------------------------------------
--  Constraints for Table VASARLASOK
--------------------------------------------------------

  ALTER TABLE "H047123"."VASARLASOK" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."VASARLASOK" MODIFY ("FELVETEL" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLASOK" MODIFY ("VASARLO_EMAIL" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLASOK" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table VASARLOK
--------------------------------------------------------

  ALTER TABLE "H047123"."VASARLOK" ADD PRIMARY KEY ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("HAZSZAM" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("UTCA" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("IRANYITOSZAM" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("EGYENLEG" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("BANKSZAMLASZAM" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("REG_IDOPONT" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("NEV" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("JELSZO" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASARLOK" MODIFY ("EMAIL" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table IRANYITOSZAM
--------------------------------------------------------

  ALTER TABLE "H047123"."IRANYITOSZAM" ADD PRIMARY KEY ("IRANYITOSZAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."IRANYITOSZAM" MODIFY ("VAROS" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SZAMLAK
--------------------------------------------------------

  ALTER TABLE "H047123"."SZAMLAK" ADD PRIMARY KEY ("SORSZAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("VASARLO_EMAIL" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("VASARLAS_ID" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("KELTE" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("SORSZAM" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("AFA" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZAMLAK" MODIFY ("OSSZEG" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TERMEKEK
--------------------------------------------------------

  ALTER TABLE "H047123"."TERMEKEK" ADD PRIMARY KEY ("KOD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("FELVETEL_DATUMA" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("ELADOTT_MENNYISEG" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("ELAD_AR" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("BESZ_AR" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("KATEGORIA" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("NEV" NOT NULL ENABLE);
  ALTER TABLE "H047123"."TERMEKEK" MODIFY ("KOD" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SZALLITASOK
--------------------------------------------------------

  ALTER TABLE "H047123"."SZALLITASOK" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "H047123"."SZALLITASOK" MODIFY ("VASARLAS_ID" NOT NULL ENABLE);
  ALTER TABLE "H047123"."SZALLITASOK" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table VASAROL
--------------------------------------------------------

  ALTER TABLE "H047123"."VASAROL" MODIFY ("MENNYISEG" NOT NULL ENABLE);
  ALTER TABLE "H047123"."VASAROL" MODIFY ("AR" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table SZALLITASOK
--------------------------------------------------------

  ALTER TABLE "H047123"."SZALLITASOK" ADD FOREIGN KEY ("VASARLAS_ID")
	  REFERENCES "H047123"."VASARLASOK" ("ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SZAMLAK
--------------------------------------------------------

  ALTER TABLE "H047123"."SZAMLAK" ADD FOREIGN KEY ("VASARLAS_ID")
	  REFERENCES "H047123"."VASARLASOK" ("ID") ENABLE;
  ALTER TABLE "H047123"."SZAMLAK" ADD FOREIGN KEY ("VASARLO_EMAIL")
	  REFERENCES "H047123"."VASARLOK" ("EMAIL") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VASARLASOK
--------------------------------------------------------

  ALTER TABLE "H047123"."VASARLASOK" ADD FOREIGN KEY ("VASARLO_EMAIL")
	  REFERENCES "H047123"."VASARLOK" ("EMAIL") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VASARLOK
--------------------------------------------------------

  ALTER TABLE "H047123"."VASARLOK" ADD FOREIGN KEY ("IRANYITOSZAM")
	  REFERENCES "H047123"."IRANYITOSZAM" ("IRANYITOSZAM") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VASAROL
--------------------------------------------------------

  ALTER TABLE "H047123"."VASAROL" ADD FOREIGN KEY ("VASARLAS_ID")
	  REFERENCES "H047123"."VASARLASOK" ("ID") ENABLE;
  ALTER TABLE "H047123"."VASAROL" ADD FOREIGN KEY ("TERMEK_KOD")
	  REFERENCES "H047123"."TERMEKEK" ("KOD") ENABLE;
--------------------------------------------------------
--  DDL for Trigger SZALLITAS_ID_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."SZALLITAS_ID_AUTO_INCREMENT" 
BEFORE INSERT ON SZALLITASOK
FOR EACH ROW
BEGIN
:NEW.ID := SZALLITAS_ID_SEQ.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."SZALLITAS_ID_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SZALLITAS_VASARLAS_ID_ATVESZ
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."SZALLITAS_VASARLAS_ID_ATVESZ" 
BEFORE INSERT ON SZALLITASOK
FOR EACH ROW
BEGIN
:NEW.VASARLAS_ID := VASARLAS_ID_SEQ.CURRVAL;
END;
/
ALTER TRIGGER "H047123"."SZALLITAS_VASARLAS_ID_ATVESZ" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SZAMLA_AFA_KALKULATOR
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."SZAMLA_AFA_KALKULATOR" 
BEFORE INSERT ON SZAMLAK
FOR EACH ROW
BEGIN
:NEW.AFA := :NEW.OSSZEG - (:NEW.OSSZEG / 1.27);
END;
/
ALTER TRIGGER "H047123"."SZAMLA_AFA_KALKULATOR" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SZAMLA_SORSZAM_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."SZAMLA_SORSZAM_AUTO_INCREMENT" 
BEFORE INSERT ON SZAMLAK
FOR EACH ROW
BEGIN
:NEW.SORSZAM := SZAMLA_SORSZAM_SEQ.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."SZAMLA_SORSZAM_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SZAMLAZO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."SZAMLAZO" 
AFTER UPDATE ON SZALLITASOK
FOR EACH ROW
 WHEN (NEW.ELKULDVE = 1 AND OLD.ELKULDVE = 0) DECLARE
  summa SZAMLAK.OSSZEG%TYPE;
  mailcim SZAMLAK.VASARLO_EMAIL%TYPE;
  
BEGIN
  
  SELECT SUM(AR*MENNYISEG) INTO summa 
  FROM VASAROL WHERE VASARLAS_ID = :NEW.VASARLAS_ID;
  
  SELECT VASARLO_EMAIL INTO mailcim 
  FROM VASARLASOK 
  WHERE VASARLASOK.ID = :NEW.VASARLAS_ID;
  
  INSERT INTO SZAMLAK(OSSZEG,KELTE,VASARLAS_ID,VASARLO_EMAIL) 
  VALUES(summa,SYSDATE,:NEW.VASARLAS_ID, mailcim);
  
END;
/
ALTER TRIGGER "H047123"."SZAMLAZO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TERMEK_KOD_PC_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."TERMEK_KOD_PC_AUTO_INCREMENT" 
BEFORE INSERT ON TERMEKEK
FOR EACH ROW
 WHEN (NEW.KATEGORIA = 'PC játék') BEGIN
:NEW.KOD := termek_kod_pc_seq.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."TERMEK_KOD_PC_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TERMEK_KOD_PS2_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."TERMEK_KOD_PS2_AUTO_INCREMENT" 
BEFORE INSERT ON TERMEKEK
FOR EACH ROW
 WHEN (NEW.KATEGORIA = 'PS 2 játék') BEGIN
:NEW.KOD := termek_kod_ps2_seq.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."TERMEK_KOD_PS2_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TERMEK_KOD_PS4_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."TERMEK_KOD_PS4_AUTO_INCREMENT" 
BEFORE INSERT ON TERMEKEK
FOR EACH ROW
 WHEN (NEW.KATEGORIA = 'PS 4 játék') BEGIN
:NEW.KOD := termek_kod_ps4_seq.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."TERMEK_KOD_PS4_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TERMEK_KOD_UJ_KAT_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."TERMEK_KOD_UJ_KAT_INCREMENT" 
BEFORE INSERT ON TERMEKEK
FOR EACH ROW
BEGIN
:NEW.KOD := termek_kod_uj_kategoria.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."TERMEK_KOD_UJ_KAT_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TERMEK_KOD_XBOX_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."TERMEK_KOD_XBOX_AUTO_INCREMENT" 
BEFORE INSERT ON TERMEKEK
FOR EACH ROW
 WHEN (NEW.KATEGORIA = 'Xbox játék') BEGIN
:NEW.KOD := termek_kod_xbox_seq.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."TERMEK_KOD_XBOX_AUTO_INCREMENT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger VASARLAS_ID_ATVESZ
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."VASARLAS_ID_ATVESZ" 
BEFORE INSERT ON VASAROL
FOR EACH ROW
BEGIN
:NEW.VASARLAS_ID := VASARLAS_ID_SEQ.CURRVAL;
END;
/
ALTER TRIGGER "H047123"."VASARLAS_ID_ATVESZ" ENABLE;
--------------------------------------------------------
--  DDL for Trigger VASARLAS_ID_AUTO_INCREMENT
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "H047123"."VASARLAS_ID_AUTO_INCREMENT" 
BEFORE INSERT ON VASARLASOK
FOR EACH ROW
BEGIN
:NEW.ID := VASARLAS_ID_SEQ.NEXTVAL;
END;
/
ALTER TRIGGER "H047123"."VASARLAS_ID_AUTO_INCREMENT" ENABLE;
